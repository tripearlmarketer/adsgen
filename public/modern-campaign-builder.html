<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Campaign Builder - DemandGen Pro</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    <style>
        select {
            color: white !important;
            background-color: rgb(31, 41, 55) !important;
        }
        
        select option {
            color: white !important;
            background-color: rgb(31, 41, 55) !important;
            padding: 8px;
        }
        
        select option:hover {
            background-color: rgb(55, 65, 81) !important;
        }
        .glassmorphism {
            background: rgba(255, 255, 255, 0.25);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.18);
        }
        
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        .checkbox-card {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: all 0.3s ease;
        }
        
        .checkbox-card:hover {
            background: rgba(255, 255, 255, 0.15);
            border-color: rgba(255, 255, 255, 0.3);
        }
        
        .checkbox-card.selected {
            background: rgba(103, 126, 234, 0.2);
            border-color: rgba(103, 126, 234, 0.5);
        }
        
        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 60px;
            height: 34px;
        }
        
        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        
        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(255, 255, 255, 0.2);
            transition: .4s;
            border-radius: 34px;
        }
        
        .slider:before {
            position: absolute;
            content: "";
            height: 26px;
            width: 26px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }
        
        input:checked + .slider {
            background-color: #667eea;
        }
        
        input:checked + .slider:before {
            transform: translateX(26px);
        }
        
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 16px 24px;
            border-radius: 12px;
            color: white;
            font-weight: 600;
            z-index: 1000;
            transform: translateX(400px);
            transition: transform 0.3s ease;
        }
        
        .notification.show {
            transform: translateX(0);
        }
        
        .notification.success {
            background: linear-gradient(135deg, #10b981, #059669);
        }
        
        .notification.error {
            background: linear-gradient(135deg, #ef4444, #dc2626);
        }
        
        .notification.info {
            background: linear-gradient(135deg, #3b82f6, #2563eb);
        }
    </style>
</head>
<body class="min-h-screen gradient-bg text-white">
    <!-- Notification Container -->
    <div id="notificationContainer"></div>
    
    <div class="max-w-4xl mx-auto p-6">
        <!-- Header -->
        <div class="flex items-center justify-between mb-8">
            <div class="flex items-center space-x-3">
                <div class="w-10 h-10 bg-white/20 rounded-xl flex items-center justify-center">
                    <i data-lucide="zap" class="w-6 h-6"></i>
                </div>
                <div>
                    <h1 class="text-xl font-bold">DemandGen Pro</h1>
                    <p class="text-sm text-white/70">Campaign Builder</p>
                </div>
            </div>
            <div class="flex items-center space-x-4">
                <button onclick="saveDraft()" class="px-4 py-2 bg-white/10 rounded-lg hover:bg-white/20 transition-colors flex items-center space-x-2">
                    <i data-lucide="save" class="w-4 h-4"></i>
                    <span>Save Draft</span>
                </button>
                <button onclick="exitBuilder()" class="px-4 py-2 bg-white/10 rounded-lg hover:bg-white/20 transition-colors flex items-center space-x-2">
                    <i data-lucide="x" class="w-4 h-4"></i>
                    <span>Exit Builder</span>
                </button>
            </div>
        </div>

        <div class="glassmorphism rounded-2xl p-8">
            <div class="flex items-center justify-between mb-6">
                <div>
                    <h2 class="text-2xl font-bold mb-2">Campaign Information</h2>
                    <p class="text-white/70">Let's start with the basics of your Google Ads campaign</p>
                </div>
                <div class="flex items-center space-x-3">
                    <span class="text-sm text-white/70">Auto-save</span>
                    <label class="toggle-switch">
                        <input type="checkbox" id="autoSave" checked onchange="toggleAutoSave()">
                        <span class="slider"></span>
                    </label>
                </div>
            </div>

            <div class="space-y-6">
                <!-- Campaign Name -->
                <div>
                    <label class="block text-sm font-medium mb-2">Campaign Name</label>
                    <input type="text" id="campaignName" value="Smoking Cessation Malaysia Q4" class="w-full px-4 py-3 bg-white/10 border border-white/20 rounded-xl text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-blue-400" onchange="validateForm()">
                </div>

                <!-- Campaign Type & Goal -->
                <div class="grid grid-cols-2 gap-6">
                    <div>
                        <label class="block text-sm font-medium mb-2">Campaign Type</label>
                        <select id="campaignType" class="w-full px-4 py-3 bg-gray-800 border border-white/20 rounded-xl text-white focus:outline-none focus:ring-2 focus:ring-blue-400" onchange="validateForm()">
                            <option value="demand-generation">Demand Generation</option>
                            <option value="search">Search</option>
                            <option value="display">Display</option>
                            <option value="video">Video</option>
                            <option value="shopping">Shopping</option>
                            <option value="app">App</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium mb-2">Campaign Goal</label>
                        <select id="campaignGoal" class="w-full px-4 py-3 bg-gray-800 border border-white/20 rounded-xl text-white focus:outline-none focus:ring-2 focus:ring-blue-400" onchange="validateForm()">
                            <option value="lead-generation">Lead Generation</option>
                            <option value="sales">Sales</option>
                            <option value="brand-awareness">Brand Awareness</option>
                            <option value="website-traffic">Website Traffic</option>
                            <option value="app-promotion">App Promotion</option>
                            <option value="local-store-visits">Local Store Visits</option>
                        </select>
                    </div>
                </div>

                <!-- Landing Page URL -->
                <div>
                    <label class="block text-sm font-medium mb-2">Landing Page URL</label>
                    <input type="url" id="landingPageUrl" value="https://quit-smoking-malaysia.com" class="w-full px-4 py-3 bg-white/10 border border-white/20 rounded-xl text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-blue-400" onchange="validateForm()">
                </div>

                <!-- Malaysia Market Optimization -->
                <div class="bg-white/5 rounded-xl p-6 border border-white/10">
                    <div class="flex items-center justify-between mb-6">
                        <div class="flex items-center space-x-3">
                            <div class="w-8 h-8 bg-red-500/20 rounded-lg flex items-center justify-center">
                                <span class="text-lg">ðŸ‡²ðŸ‡¾</span>
                            </div>
                            <h3 class="text-lg font-semibold">Malaysia Market Optimization</h3>
                        </div>
                        <div class="flex items-center space-x-3">
                            <span class="text-sm text-white/70">Enable Malaysia Features</span>
                            <label class="toggle-switch">
                                <input type="checkbox" id="malaysiaOptimization" checked onchange="toggleMalaysiaOptimization()">
                                <span class="slider"></span>
                            </label>
                        </div>
                    </div>

                    <div id="malaysiaFeatures">
                        <!-- Primary Languages (Multiple Selection) -->
                        <div class="mb-6">
                            <div class="flex items-center justify-between mb-3">
                                <label class="block text-sm font-medium">Primary Languages (Select Multiple)</label>
                                <button onclick="selectAllLanguages()" class="text-xs text-blue-300 hover:text-blue-200">Select All</button>
                            </div>
                            <div class="grid grid-cols-2 gap-3">
                                <label class="checkbox-card flex items-center p-3 rounded-xl cursor-pointer">
                                    <input type="checkbox" name="languages" value="bahasa" class="w-4 h-4 mr-3" checked>
                                    <span>ðŸ‡²ðŸ‡¾ Bahasa Malaysia</span>
                                </label>
                                <label class="checkbox-card flex items-center p-3 rounded-xl cursor-pointer">
                                    <input type="checkbox" name="languages" value="english" class="w-4 h-4 mr-3" checked>
                                    <span>ðŸ‡ºðŸ‡¸ English</span>
                                </label>
                                <label class="checkbox-card flex items-center p-3 rounded-xl cursor-pointer">
                                    <input type="checkbox" name="languages" value="chinese" class="w-4 h-4 mr-3">
                                    <span>ðŸ‡¨ðŸ‡³ Chinese (Mandarin)</span>
                                </label>
                                <label class="checkbox-card flex items-center p-3 rounded-xl cursor-pointer">
                                    <input type="checkbox" name="languages" value="tamil" class="w-4 h-4 mr-3">
                                    <span>ðŸ‡®ðŸ‡³ Tamil</span>
                                </label>
                            </div>
                            <p class="text-sm text-white/60 mt-2">Multi-language campaigns perform 45% better in Malaysia</p>
                        </div>

                        <!-- Target States (Multiple Selection) -->
                        <div>
                            <div class="flex items-center justify-between mb-3">
                                <label class="block text-sm font-medium">Target States (Select Multiple)</label>
                                <button onclick="selectAllStates()" class="text-xs text-blue-300 hover:text-blue-200">Select All</button>
                            </div>
                            <div class="grid grid-cols-2 gap-3 max-h-64 overflow-y-auto bg-black/10 p-4 rounded-xl">
                                <label class="checkbox-card flex items-center p-3 rounded-xl cursor-pointer">
                                    <input type="checkbox" name="states" value="kl" class="w-4 h-4 mr-3" checked>
                                    <span>Kuala Lumpur</span>
                                </label>
                                <label class="checkbox-card flex items-center p-3 rounded-xl cursor-pointer">
                                    <input type="checkbox" name="states" value="selangor" class="w-4 h-4 mr-3" checked>
                                    <span>Selangor</span>
                                </label>
                                <label class="checkbox-card flex items-center p-3 rounded-xl cursor-pointer">
                                    <input type="checkbox" name="states" value="penang" class="w-4 h-4 mr-3">
                                    <span>Penang</span>
                                </label>
                                <label class="checkbox-card flex items-center p-3 rounded-xl cursor-pointer">
                                    <input type="checkbox" name="states" value="johor" class="w-4 h-4 mr-3">
                                    <span>Johor</span>
                                </label>
                                <label class="checkbox-card flex items-center p-3 rounded-xl cursor-pointer">
                                    <input type="checkbox" name="states" value="perak" class="w-4 h-4 mr-3">
                                    <span>Perak</span>
                                </label>
                                <label class="checkbox-card flex items-center p-3 rounded-xl cursor-pointer">
                                    <input type="checkbox" name="states" value="sabah" class="w-4 h-4 mr-3">
                                    <span>Sabah</span>
                                </label>
                                <label class="checkbox-card flex items-center p-3 rounded-xl cursor-pointer">
                                    <input type="checkbox" name="states" value="sarawak" class="w-4 h-4 mr-3">
                                    <span>Sarawak</span>
                                </label>
                                <label class="checkbox-card flex items-center p-3 rounded-xl cursor-pointer">
                                    <input type="checkbox" name="states" value="kedah" class="w-4 h-4 mr-3">
                                    <span>Kedah</span>
                                </label>
                                <label class="checkbox-card flex items-center p-3 rounded-xl cursor-pointer">
                                    <input type="checkbox" name="states" value="kelantan" class="w-4 h-4 mr-3">
                                    <span>Kelantan</span>
                                </label>
                                <label class="checkbox-card flex items-center p-3 rounded-xl cursor-pointer">
                                    <input type="checkbox" name="states" value="terengganu" class="w-4 h-4 mr-3">
                                    <span>Terengganu</span>
                                </label>
                                <label class="checkbox-card flex items-center p-3 rounded-xl cursor-pointer">
                                    <input type="checkbox" name="states" value="pahang" class="w-4 h-4 mr-3">
                                    <span>Pahang</span>
                                </label>
                                <label class="checkbox-card flex items-center p-3 rounded-xl cursor-pointer">
                                    <input type="checkbox" name="states" value="negeri-sembilan" class="w-4 h-4 mr-3">
                                    <span>Negeri Sembilan</span>
                                </label>
                                <label class="checkbox-card flex items-center p-3 rounded-xl cursor-pointer">
                                    <input type="checkbox" name="states" value="melaka" class="w-4 h-4 mr-3">
                                    <span>Melaka</span>
                                </label>
                                <label class="checkbox-card flex items-center p-3 rounded-xl cursor-pointer">
                                    <input type="checkbox" name="states" value="perlis" class="w-4 h-4 mr-3">
                                    <span>Perlis</span>
                                </label>
                                <label class="checkbox-card flex items-center p-3 rounded-xl cursor-pointer">
                                    <input type="checkbox" name="states" value="labuan" class="w-4 h-4 mr-3">
                                    <span>Labuan</span>
                                </label>
                                <label class="checkbox-card flex items-center p-3 rounded-xl cursor-pointer">
                                    <input type="checkbox" name="states" value="putrajaya" class="w-4 h-4 mr-3">
                                    <span>Putrajaya</span>
                                </label>
                            </div>
                            <p class="text-sm text-white/60 mt-2">Recommended: Start with major cities (KL, Selangor, Penang) then expand</p>
                        </div>

                        <!-- Festival Targeting -->
                        <div class="mt-6 bg-gradient-to-r from-orange-500/10 to-yellow-500/10 rounded-xl p-4 border border-orange-300/20">
                            <div class="flex items-center justify-between mb-3">
                                <div class="flex items-center space-x-3">
                                    <span class="text-lg">ðŸª”</span>
                                    <div>
                                        <h4 class="font-semibold">Festival Targeting Available</h4>
                                        <p class="text-sm text-white/70">Deepavali is tomorrow! +89% engagement boost</p>
                                    </div>
                                </div>
                                <label class="toggle-switch">
                                    <input type="checkbox" id="festivalTargeting" onchange="toggleFestivalTargeting()">
                                    <span class="slider"></span>
                                </label>
                            </div>
                            <div id="festivalOptions" class="hidden">
                                <div class="grid grid-cols-3 gap-3 mt-3">
                                    <label class="checkbox-card flex items-center p-2 rounded-lg cursor-pointer">
                                        <input type="checkbox" name="festivals" value="deepavali" class="w-3 h-3 mr-2">
                                        <span class="text-sm">ðŸª” Deepavali</span>
                                    </label>
                                    <label class="checkbox-card flex items-center p-2 rounded-lg cursor-pointer">
                                        <input type="checkbox" name="festivals" value="cny" class="w-3 h-3 mr-2">
                                        <span class="text-sm">ðŸ§§ CNY</span>
                                    </label>
                                    <label class="checkbox-card flex items-center p-2 rounded-lg cursor-pointer">
                                        <input type="checkbox" name="festivals" value="hari-raya" class="w-3 h-3 mr-2">
                                        <span class="text-sm">ðŸŒ™ Hari Raya</span>
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Advanced Settings -->
                <div class="bg-white/5 rounded-xl p-6 border border-white/10">
                    <div class="flex items-center justify-between mb-6">
                        <h3 class="text-lg font-semibold">Advanced Settings</h3>
                        <button onclick="toggleAdvancedSettings()" class="text-blue-300 hover:text-blue-200 flex items-center space-x-2">
                            <span id="advancedToggleText">Show Advanced</span>
                            <i data-lucide="chevron-down" id="advancedToggleIcon" class="w-4 h-4"></i>
                        </button>
                    </div>
                    
                    <div id="advancedSettings" class="hidden space-y-4">
                        <!-- Peak Hour Optimization -->
                        <div class="flex items-center justify-between">
                            <div>
                                <h4 class="font-medium">Peak Hour Optimization</h4>
                                <p class="text-sm text-white/60">Schedule ads during 7-9 PM Malaysia time</p>
                            </div>
                            <label class="toggle-switch">
                                <input type="checkbox" id="peakHourOptimization" checked>
                                <span class="slider"></span>
                            </label>
                        </div>

                        <!-- Mobile First -->
                        <div class="flex items-center justify-between">
                            <div>
                                <h4 class="font-medium">Mobile-First Optimization</h4>
                                <p class="text-sm text-white/60">Prioritize mobile devices (75% of Malaysia traffic)</p>
                            </div>
                            <label class="toggle-switch">
                                <input type="checkbox" id="mobileFirst" checked>
                                <span class="slider"></span>
                            </label>
                        </div>

                        <!-- AI Optimization -->
                        <div class="flex items-center justify-between">
                            <div>
                                <h4 class="font-medium">AI Bid Optimization</h4>
                                <p class="text-sm text-white/60">Let AI optimize bids for better performance</p>
                            </div>
                            <label class="toggle-switch">
                                <input type="checkbox" id="aiOptimization" checked>
                                <span class="slider"></span>
                            </label>
                        </div>

                        <!-- Budget Protection -->
                        <div class="flex items-center justify-between">
                            <div>
                                <h4 class="font-medium">Budget Protection</h4>
                                <p class="text-sm text-white/60">Automatic budget alerts and controls</p>
                            </div>
                            <label class="toggle-switch">
                                <input type="checkbox" id="budgetProtection" checked>
                                <span class="slider"></span>
                            </label>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Quick Selection Buttons -->
            <div class="mt-6 flex flex-wrap items-center justify-between gap-4">
                <div class="flex flex-wrap items-center gap-4">
                    <button onclick="selectMajorCities()" class="px-4 py-2 bg-blue-500/20 text-blue-300 rounded-lg hover:bg-blue-500/30 transition-colors flex items-center space-x-2">
                        <i data-lucide="map-pin" class="w-4 h-4"></i>
                        <span>Major Cities Only</span>
                    </button>
                    <button onclick="selectAllStates()" class="px-4 py-2 bg-purple-500/20 text-purple-300 rounded-lg hover:bg-purple-500/30 transition-colors flex items-center space-x-2">
                        <i data-lucide="globe" class="w-4 h-4"></i>
                        <span>All States</span>
                    </button>
                    <button onclick="selectRecommended()" class="px-4 py-2 bg-green-500/20 text-green-300 rounded-lg hover:bg-green-500/30 transition-colors flex items-center space-x-2">
                        <i data-lucide="star" class="w-4 h-4"></i>
                        <span>Use Recommended</span>
                    </button>
                </div>
                <div class="flex items-center space-x-2">
                    <span class="text-sm text-white/60">Form completion:</span>
                    <div class="w-32 bg-white/20 rounded-full h-2">
                        <div id="progressBar" class="bg-green-400 h-2 rounded-full transition-all duration-300" style="width: 85%"></div>
                    </div>
                    <span id="progressText" class="text-sm text-green-400">85%</span>
                </div>
            </div>

            <!-- Navigation -->
            <div class="mt-8 flex items-center justify-between">
                <button onclick="goBack()" class="px-6 py-3 bg-white/10 rounded-xl hover:bg-white/20 transition-colors flex items-center space-x-2">
                    <i data-lucide="arrow-left" class="w-4 h-4"></i>
                    <span>Back</span>
                </button>
                <button onclick="continueToAudience()" id="continueBtn" class="px-6 py-3 bg-blue-600 rounded-xl hover:bg-blue-700 transition-colors flex items-center space-x-2">
                    <span>Continue to Audience</span>
                    <i data-lucide="arrow-right" class="w-4 h-4"></i>
                </button>
            </div>
        </div>
    </div>

    <script>
        // Initialize Lucide icons
        lucide.createIcons();
        
        // Auto-save functionality
        let autoSaveEnabled = true;
        let autoSaveInterval;
        
        function toggleAutoSave() {
            autoSaveEnabled = document.getElementById('autoSave').checked;
            if (autoSaveEnabled) {
                startAutoSave();
                showNotification('Auto-save enabled', 'success');
            } else {
                clearInterval(autoSaveInterval);
                showNotification('Auto-save disabled', 'info');
            }
        }
        
        function startAutoSave() {
            autoSaveInterval = setInterval(() => {
                if (autoSaveEnabled) {
                    saveDraft(true);
                }
            }, 30000); // Auto-save every 30 seconds
        }
        
        // Save draft functionality
        function saveDraft(isAutoSave = false) {
            const formData = {
                campaignName: document.getElementById('campaignName').value,
                campaignType: document.getElementById('campaignType').value,
                campaignGoal: document.getElementById('campaignGoal').value,
                landingPageUrl: document.getElementById('landingPageUrl').value,
                languages: Array.from(document.querySelectorAll('input[name="languages"]:checked')).map(cb => cb.value),
                states: Array.from(document.querySelectorAll('input[name="states"]:checked')).map(cb => cb.value),
                festivals: Array.from(document.querySelectorAll('input[name="festivals"]:checked')).map(cb => cb.value),
                malaysiaOptimization: document.getElementById('malaysiaOptimization').checked,
                peakHourOptimization: document.getElementById('peakHourOptimization').checked,
                mobileFirst: document.getElementById('mobileFirst').checked,
                aiOptimization: document.getElementById('aiOptimization').checked,
                budgetProtection: document.getElementById('budgetProtection').checked,
                timestamp: new Date().toISOString()
            };
            
            localStorage.setItem('campaignDraft', JSON.stringify(formData));
            
            if (!isAutoSave) {
                showNotification('Draft saved successfully!', 'success');
            }
        }
        
        // Exit builder functionality
        function exitBuilder() {
            if (confirm('Are you sure you want to exit? Any unsaved changes will be lost.')) {
                window.location.href = 'google-ads-campaign-builder.html';
            }
        }
        
        // Malaysia optimization toggle
        function toggleMalaysiaOptimization() {
            const isEnabled = document.getElementById('malaysiaOptimization').checked;
            const features = document.getElementById('malaysiaFeatures');
            
            if (isEnabled) {
                features.style.display = 'block';
                showNotification('Malaysia optimization enabled', 'success');
            } else {
                features.style.display = 'none';
                showNotification('Malaysia optimization disabled', 'info');
            }
        }
        
        // Festival targeting toggle
        function toggleFestivalTargeting() {
            const isEnabled = document.getElementById('festivalTargeting').checked;
            const options = document.getElementById('festivalOptions');
            
            if (isEnabled) {
                options.classList.remove('hidden');
                showNotification('Festival targeting enabled - +89% engagement boost!', 'success');
            } else {
                options.classList.add('hidden');
                showNotification('Festival targeting disabled', 'info');
            }
        }
        
        // Advanced settings toggle
        function toggleAdvancedSettings() {
            const settings = document.getElementById('advancedSettings');
            const text = document.getElementById('advancedToggleText');
            const icon = document.getElementById('advancedToggleIcon');
            
            if (settings.classList.contains('hidden')) {
                settings.classList.remove('hidden');
                text.textContent = 'Hide Advanced';
                icon.style.transform = 'rotate(180deg)';
            } else {
                settings.classList.add('hidden');
                text.textContent = 'Show Advanced';
                icon.style.transform = 'rotate(0deg)';
            }
        }
        
        // Language selection functions
        function selectAllLanguages() {
            document.querySelectorAll('input[name="languages"]').forEach(checkbox => {
                checkbox.checked = true;
            });
            updateSelectedLanguages();
            showNotification('All languages selected', 'success');
        }
        
        // State selection functions
        function selectMajorCities() {
            const majorCities = ['kl', 'selangor', 'penang', 'johor'];
            document.querySelectorAll('input[name="states"]').forEach(checkbox => {
                checkbox.checked = majorCities.includes(checkbox.value);
            });
            updateSelectedStates();
            showNotification('Major cities selected (KL, Selangor, Penang, Johor)', 'success');
        }
        
        function selectAllStates() {
            document.querySelectorAll('input[name="states"]').forEach(checkbox => {
                checkbox.checked = true;
            });
            updateSelectedStates();
            showNotification('All 16 states selected', 'success');
        }
        
        function selectRecommended() {
            // Select recommended states
            const recommendedStates = ['kl', 'selangor', 'penang', 'johor', 'perak'];
            document.querySelectorAll('input[name="states"]').forEach(checkbox => {
                checkbox.checked = recommendedStates.includes(checkbox.value);
            });

            // Select recommended languages
            const recommendedLanguages = ['bahasa', 'english', 'chinese'];
            document.querySelectorAll('input[name="languages"]').forEach(checkbox => {
                checkbox.checked = recommendedLanguages.includes(checkbox.value);
            });

            updateSelectedStates();
            updateSelectedLanguages();
            showNotification('Recommended selection applied (3 languages, 5 states)', 'success');
        }
        
        // Visual feedback functions
        function updateSelectedStates() {
            document.querySelectorAll('input[name="states"]').forEach(checkbox => {
                const card = checkbox.closest('.checkbox-card');
                if (checkbox.checked) {
                    card.classList.add('selected');
                } else {
                    card.classList.remove('selected');
                }
            });
            validateForm();
        }
        
        function updateSelectedLanguages() {
            document.querySelectorAll('input[name="languages"]').forEach(checkbox => {
                const card = checkbox.closest('.checkbox-card');
                if (checkbox.checked) {
                    card.classList.add('selected');
                } else {
                    card.classList.remove('selected');
                }
            });
            validateForm();
        }
        
        // Form validation
        function validateForm() {
            const campaignName = document.getElementById('campaignName').value;
            const landingPageUrl = document.getElementById('landingPageUrl').value;
            const selectedLanguages = document.querySelectorAll('input[name="languages"]:checked').length;
            const selectedStates = document.querySelectorAll('input[name="states"]:checked').length;
            
            let progress = 0;
            let isValid = true;
            
            if (campaignName.trim()) progress += 25;
            else isValid = false;
            
            if (landingPageUrl.trim() && isValidUrl(landingPageUrl)) progress += 25;
            else isValid = false;
            
            if (selectedLanguages > 0) progress += 25;
            else isValid = false;
            
            if (selectedStates > 0) progress += 25;
            else isValid = false;
            
            // Update progress bar
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('progressText').textContent = progress + '%';
            
            // Update continue button
            const continueBtn = document.getElementById('continueBtn');
            if (isValid) {
                continueBtn.disabled = false;
                continueBtn.classList.remove('opacity-50', 'cursor-not-allowed');
            } else {
                continueBtn.disabled = true;
                continueBtn.classList.add('opacity-50', 'cursor-not-allowed');
            }
            
            return isValid;
        }
        
        function isValidUrl(string) {
            try {
                new URL(string);
                return true;
            } catch (_) {
                return false;
            }
        }
        
        // Navigation functions
        function goBack() {
            if (confirm('Go back to campaign selection? Current progress will be saved as draft.')) {
                saveDraft();
                window.location.href = 'google-ads-campaign-builder.html';
            }
        }
        
        function continueToAudience() {
            if (!validateForm()) {
                showNotification('Please complete all required fields', 'error');
                return;
            }
            
            const selectedLanguages = Array.from(document.querySelectorAll('input[name="languages"]:checked')).map(cb => cb.value);
            const selectedStates = Array.from(document.querySelectorAll('input[name="states"]:checked')).map(cb => cb.value);
            
            // Save current progress
            saveDraft();
            
            // Show success message
            showNotification(`Campaign setup complete! Selected ${selectedLanguages.length} languages and ${selectedStates.length} states`, 'success');
            
            // Redirect to audience targeting (or show completion for now)
            setTimeout(() => {
                alert(`ðŸŽ¯ Campaign Information Completed!\n\n` +
                      `Campaign: ${document.getElementById('campaignName').value}\n` +
                      `Type: ${document.getElementById('campaignType').value}\n` +
                      `Goal: ${document.getElementById('campaignGoal').value}\n` +
                      `Languages: ${selectedLanguages.join(', ')}\n` +
                      `States: ${selectedStates.length} selected\n\n` +
                      `âœ… Malaysia optimization enabled\n` +
                      `âœ… Multi-language targeting configured\n` +
                      `âœ… Geographic targeting set\n` +
                      `âœ… Advanced features configured\n\n` +
                      `Ready to proceed to Audience Targeting!`);
                
                // For now, redirect to analytics (in real app, would go to next step)
                window.location.href = 'audience-targeting.html';
            }, 2000);
        }
        
        // Notification system
        function showNotification(message, type = 'info') {
            const container = document.getElementById('notificationContainer');
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            notification.innerHTML = `
                <div class="flex items-center space-x-3">
                    <i data-lucide="${type === 'success' ? 'check-circle' : type === 'error' ? 'x-circle' : 'info'}" class="w-5 h-5"></i>
                    <span>${message}</span>
                </div>
            `;
            
            container.appendChild(notification);
            lucide.createIcons();
            
            // Show notification
            setTimeout(() => notification.classList.add('show'), 100);
            
            // Hide notification after 3 seconds
            setTimeout(() => {
                notification.classList.remove('show');
                setTimeout(() => container.removeChild(notification), 300);
            }, 3000);
        }
        
        // Initialize page
        document.addEventListener('DOMContentLoaded', () => {
            // Add change event listeners to all checkboxes
            document.querySelectorAll('input[type="checkbox"]').forEach(checkbox => {
                checkbox.addEventListener('change', function() {
                    const card = this.closest('.checkbox-card');
                    if (card) {
                        if (this.checked) {
                            card.classList.add('selected');
                        } else {
                            card.classList.remove('selected');
                        }
                    }
                    validateForm();
                });
            });
            
            // Initialize visual states
            updateSelectedStates();
            updateSelectedLanguages();
            validateForm();
            
            // Start auto-save
            startAutoSave();
            
            // Load draft if exists
            const draft = localStorage.getItem('campaignDraft');
            if (draft) {
                try {
                    const data = JSON.parse(draft);
                    // Restore form data (simplified for demo)
                    if (data.campaignName) document.getElementById('campaignName').value = data.campaignName;
                    showNotification('Draft loaded successfully', 'info');
                } catch (e) {
                    console.error('Error loading draft:', e);
                }
            }
            
            // Show welcome message
            setTimeout(() => {
                showNotification('Campaign Builder loaded. Auto-save is enabled.', 'success');
            }, 1000);
        });
    </script>
</body>
</html>
